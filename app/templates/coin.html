<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Token Universe ‚Ä¢ Coin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/static/app.css">
</head>
<body>
  <div class="container">

    <div class="topbar">
      <div class="brand">
        <div class="logo"></div>
        <div class="brandText">
          <div class="brandTitle"><a href="/" style="color:inherit; text-decoration:none;">Token Universe</a></div>
          <div class="brandSub">Coin view</div>
        </div>
      </div>

      <div class="topbarRight">
        <button class="btn btnGhost" id="metricToggle" type="button">Metric: Market Cap</button>
        <button class="btn btnGhost" id="densityToggle" type="button">Density: Comfortable</button>
        <div class="walletBadge" id="walletBalance">Wallet: $10,000.00</div>
        <div class="badge"><span class="dot"></span>Live</div>
      </div>
    </div>

    <div class="panel" style="margin-top:14px;">
      <div class="tabs">
        <a class="tab" href="/">üè†</a>
        <a class="tab" href="/search">Search</a>
        <a class="tab" href="/discover/trending">Trending</a>
        <a class="tab" href="/discover/graduated">Newly graduated</a>
        <a class="tab" href="/discover/verified">Verified</a>
        <a class="tab" href="/watchlist">Watchlist</a>
      </div>
    </div>

    {% if not pair %}
      <div class="empty" style="margin-top:14px;">
        <div class="emptyTitle">No Solana pair found</div>
        <div class="emptySub"><code>{{ token_address }}</code></div>
      </div>
    {% else %}
      {% set img = (pair.info.imageUrl if pair.info and pair.info.imageUrl else (pair.baseToken.address | avatar)) %}
      {% set mcap = (pair.marketCap if pair.marketCap else (pair.fdv if pair.fdv else 0)) %}
      {% set pc = (pair.priceChange if pair.priceChange else {}) %}
      {% set h1 = pc.get('h1') %}
      {% set h6 = pc.get('h6') %}
      {% set h24 = pc.get('h24') %}
      {% set rarity = (pair._rarity if pair._rarity else 'common') %}
      {% set verified = (pair._verified if pair._verified else false) %}
      {% set risk_label = (pair._riskLabel if pair._riskLabel else 'Unknown') %}
      {% set risk_class = (pair._riskClass if pair._riskClass else 'medium') %}

      <div class="coinCard {{ rarity }}">
        <div class="coinTop">
          <div class="coinLeft">
            <img class="tokenIconXXL" src="{{ img }}" alt="{{ pair.baseToken.symbol }}"/>
            <div>
              <div class="coinTitle">
                <span class="coinSym">{{ pair.baseToken.symbol }}</span>
                <span class="pairMuted">/ {{ pair.quoteToken.symbol }}</span>
                {% if verified %}
                  <span class="verifiedBadge big">Verified</span>
                {% endif %}
              </div>

              <div class="coinSub">
                <span class="dex">{{ pair.dexId }}</span>
                <span class="agePill bigAge">Age <b>{{ pair.pairCreatedAt | age }}</b></span>
                <span class="rarityPill {{ rarity }}">{{ rarity|capitalize }}</span>
                <span class="riskBadge {{ risk_class }}">Risk: {{ risk_label }}</span>
              </div>

              <div class="badgeRow">
                <span class="chgBadge {{ h1 | pctclass }}">1h {{ h1 | pct }}</span>
                <span class="chgBadge {{ h6 | pctclass }}">6h {{ h6 | pct }}</span>
                <span class="chgBadge {{ h24 | pctclass }}">24h {{ h24 | pct }}</span>
                {% if pair._liquidityLocked is not none and not pair._liquidityLocked %}
                  <span class="warnBadge">‚ö†Ô∏è Liquidity unlocked</span>
                {% endif %}
              </div>
            </div>
          </div>

          <div class="coinRight metricBox"
               data-price="${{ pair.priceUsd | compact }}"
               data-mcap="${{ mcap | compact }}">
            <div class="metricTop">
              <div>
                <div class="metricLabel">Market Cap</div>
                <div class="metricHero">${{ mcap | compact }}</div>
              </div>
              <div class="sparkWrap {{ h24 | pctclass }}">
                {{ pc | spark }}
              </div>
            </div>

            <div class="metricSub">
              Liq <b>${{ (pair.liquidity.usd if pair.liquidity else 0) | compact }}</b>
              ‚Ä¢ Vol 24h <b>${{ (pair.volume.h24 if pair.volume else 0) | compact }}</b>
            </div>
          </div>
        </div>

        <div class="coinStats">
          <div class="stat">
            <div class="statLabel">Txns (24h)</div>
            <div class="statValue">{{ ((pair.txns.h24.buys + pair.txns.h24.sells) if pair.txns else 0) | compact }}</div>
          </div>
          <div class="stat">
            <div class="statLabel">FDV</div>
            <div class="statValue">${{ pair.fdv | compact }}</div>
          </div>
          <div class="stat">
            <div class="statLabel">Price</div>
            <div class="statValue" data-live="price">${{ pair.priceUsd | compact }}</div>
          </div>
          <div class="stat">
            <div class="statLabel">Liquidity</div>
            <div class="statValue">${{ (pair.liquidity.usd if pair.liquidity else 0) | compact }}</div>
          </div>
        </div>
      </div>

      <div class="panel tradePanel" id="coinTrade" data-mint="{{ pair.baseToken.address }}" data-price="{{ pair.priceUsd }}">
        <div class="panelHead">
          <div>
            <div class="h2">Trade @ market price</div>
            <div class="hint">Wallet-backed paper trades at the live price.</div>
          </div>
        </div>
        <div class="tradeGrid">
          <div class="tradeRow">
            <span>Market price</span>
            <strong data-trade="price">‚Äî</strong>
          </div>
          <div class="tradeRow">
            <span>Wallet cash</span>
            <strong data-trade="cash">$0.00</strong>
          </div>
          <div class="tradeRow">
            <span>Holdings</span>
            <strong data-trade="holdings">0</strong>
          </div>
          <div class="tradeRow">
            <span>Open P/L</span>
            <strong data-trade="pnl">‚Äî</strong>
          </div>
          <div class="tradeRow">
            <span>Position value</span>
            <strong data-trade="value">$0.00</strong>
          </div>
          <div class="tradeInputs">
            <input class="input" data-trade="usd" placeholder="USD amount" inputmode="decimal"/>
            <input class="input" data-trade="qty" placeholder="Token qty" inputmode="decimal"/>
          </div>
          <div class="tradeActions">
            <button class="btn btnPrimary" data-trade="buy" type="button">Buy @ Market</button>
            <button class="btn btnGhost" data-trade="sell" type="button">Sell @ Market</button>
          </div>
          <div class="tradeQuick" data-trade="quick">
            <div class="quickButtons">
              <button class="btn btnGhost btnSmall" type="button" data-quick-index="0">5%</button>
              <button class="btn btnGhost btnSmall" type="button" data-quick-index="1">10%</button>
              <button class="btn btnGhost btnSmall" type="button" data-quick-index="2">50%</button>
              <button class="btn btnGhost btnSmall" type="button" data-quick-index="3">Max</button>
            </div>
            <button class="btn btnGhost btnSmall" type="button" data-quick-settings>‚öôÔ∏è</button>
          </div>
          <div class="quickSettings" data-trade="quick-settings">
            <div class="quickSettingsTitle">Quick sizes (%)</div>
            <div class="quickSettingsInputs">
              <input class="input inputSmall" type="number" min="1" max="100" data-quick-input="0"/>
              <input class="input inputSmall" type="number" min="1" max="100" data-quick-input="1"/>
              <input class="input inputSmall" type="number" min="1" max="100" data-quick-input="2"/>
              <input class="input inputSmall" type="number" min="1" max="100" data-quick-input="3"/>
            </div>
            <div class="quickSettingsActions">
              <button class="btn btnPrimary btnSmall" type="button" data-quick-save>Save</button>
            </div>
          </div>
          <div class="tradeHint" data-trade="hint"></div>
        </div>
      </div>

      <div class="panel">
        <div class="panelHead">
          <div>
            <div class="h2">Live chart</div>
            <div class="hint">Streaming price action from DexScreener.</div>
          </div>
        </div>
        {% if pair.pairAddress %}
          <div class="chartFrame" style="margin-top:12px;">
            <iframe src="https://dexscreener.com/solana/{{ pair.pairAddress }}?embed=1&theme=dark&trades=0&info=0" loading="lazy"></iframe>
          </div>
        {% else %}
          <div class="drawerEmpty" style="margin-top:12px;">Live chart unavailable.</div>
        {% endif %}
      </div>
    {% endif %}

    <div class="footer">Token Universe ‚Ä¢ Coin view</div>
  </div>

  <script src="/static/state.js"></script>
  <script src="/static/ui.js"></script>
  <script>
    TokenUniverseUI.initCoinPage();
  </script>
</body>
</html>
